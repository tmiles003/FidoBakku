
<div class="row">
  <div class="col-md-8">
    <h2><small>Goal:</small> {{ goal.title }}</h2>
  </div>
  <div class="col-md-4">
  <a href="{{ goal.user.user_path }}">Back to {{ goal.user.name }}</a>
  </div>
</div>

<div class="row">
  <div class="col-md-8" id="fi-goal-content">
    <form accept-charset="utf-8" novalidate name="eGoalForm">
      <div class="form-group">
        <label for="goal_content" class="sr-only">Goal details</label>
        <textarea name="goal_content" ng-model="goal.content" rows="6"
          class="form-control" placeholder="Goal details"
          >{{ goal.content }}</textarea>
      </div>
      <div class="actions text-right" ng-show="eGoalForm.goal_content.$dirty">
        <button ng-click="saveGoal(goal)" type="button"
          class="btn btn-default btn-success btn-sm fi-btn-wide">Save</button>
      </div>
    </form>
    <!-- need something here... -->
    <form accept-charset="utf-8" novalidate name="eGoalDueForm" class="form-horizontal">
      <div class="form-group">
        <label for="goal_due_date" class="col-md-3 control-label">Due date</label>
        <div class="input-group col-md-6">
          <!--
            datepicker-popup="{{ format }}" ng-model="dt" 
            is-open="opened" datepicker-options="dateOptions" 
            date-disabled="disabled(date, mode)" 
          -->
          <input type="text" class="form-control" 
            is-open="opened" 
            ng-model="goal.due_date"
            datepicker-popup="{{ format }}" 
            show-button-bar="false" 
            datepicker-options="datePickerOptions" 
            min="minDate">
          <span class="input-group-btn">
            <button class="btn btn-default fi-due-date" ng-click="openDatePicker($event)">
              <i class="fa fa-calendar"></i></button>
          </span>
        </div>
      </div>
    </form>
  </div>
  
  <div class="col-md-4">
    <h3><small>Session:</small> {{ goal.evaluation_session.title }}</h3>
  </div>
</div>

<div class="row">
  <div class="col-md-12">
  
    <div class="panel panel-default" ng-show="comments.length">
      <!-- div class="panel-heading">Comments</div -->
      <!-- div class="panel-body">
        Comments
      </div -->
    
      <table class="table">
        <tr ng-repeat="comment in comments | orderBy: '+created_at_ts'">
          <td class="fi-5pc">
            <img ng-src="//secure.gravatar.com/avatar/{{ comment.user.email_hash }}?s=30&d=mm" alt="">
          </td>
          <td class="fi-15pc">
            {{ comment.user.name }}
          </td>
          <td class="fi-nl2br">{{ comment.content }}</td>
          <!-- td class="fi-5pc">
            {{ comment.created_at }}
          </td -->
          <td class="fi-5pc">
            <button class="btn btn-default fi-btn-slim" ng-click="deleteConfirm(comment)">
              <i class="fa fa-trash-o fa-lg"></i>
          </td>
        </tr>
      </table>
    </div>
      
    <div class="panel panel-default">
      <!-- div class="panel-body">
        Add Comment
      </div -->
      
      <div class="fi-panel-inner">
        <form accept-charset="utf-8" novalidate name="eCommentForm">
         
          <div class="form-group" ng-class="{ 'has-error': eCommentForm.comment_content.$invalid && submitted }">
            <label for="comment_content" class="sr-only">Comment</label>
            <textarea class="form-control fi-vresize" name="comment_content" ng-model="eComment.content"
              ng-required="true" ng-minlength="2" rows="2" placeholder="Add comment"></textarea>
            <p ng-show="eCommentForm.comment_content.$invalid && submitted" 
              class="help-block">Comment is required</p>
          </div>
          <div class="actions text-right">
            <button ng-click="saveComment(eComment, eCommentForm.$valid)" type="button"
              class="btn btn-default btn-success btn-sm fi-btn-wide">Save</button>
            <button ng-click="clearForm()" class="btn btn-default btn-sm">
              <i class="fa fa-eraser" tooltip="Clear form" 
                tooltip-placement="bottom" tooltip-popup-delay="1500"></i></button>
          </div>
        </form>
      </div>
      
    </div>
    
  </div>
</div>
