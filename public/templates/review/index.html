<h1>Review</h1>

<div class="container">

<form name="reviewForm" id="reviewForm" novalidate>
<div class="row" ng-repeat="topic in form.topics | orderBy: '+ordr'">
  
  <div class="panel panel-default">
    <div class="panel-heading">
      {{ topic.name }}
    </div>
    
    <ul class="list-group">
      <li class="list-group-item" ng-repeat="benchmark in topic.benchmarks | orderBy: '+ordr'">
        <div class="col-md-11">
          {{ benchmark.content }}
        </div>
        
        <div class="col-md-1"><!-- ng-invalid-pattern: border red -->
          <input type="text" ng-model="scores[benchmark.id]" 
            ng-pattern="/^(\?|[1-4](?:.5)?|5)$/" class="form-control text-center">
        </div>
        <div style="clear:both;"></div>
      </li>
    </ul>
  </div>

</div>
</form>

<div class="row" ng-controller="ReviewFeedbackCtrl">
  <form novalidate class="form-horizontal" name="feedbackForm">
    <input type="hidden" ng-model="feedback.id">
    
    <label for="feedback_content" class="col-md-2 control-label">Feedback</label>
    
    <div class="col-md-9" ng-class="{ 'has-error': feedbackForm.feedback_content.$invalid 
          && submitted }">
        <textarea class="form-control" name="feedback_content" ng-model="feedback.content" 
          ng-required="true" ng-minlength="2" rows="6"></textarea>
        <p ng-show="feedbackForm.feedback_content.$invalid && submitted" 
            class="help-block">Content is required</p>
    </div>
    <div class="col-md-1">
      <button ng-click="saveFeedback(feedback, feedbackForm.$valid)" type="button"
        class="btn btn-default btn-sm">Save</button>
    </div>
  </form>
</div>

</div>