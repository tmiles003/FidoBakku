<h1>Review</h1>

<form name="reviewForm" id="reviewForm" novalidate>
<div class="row" ng-repeat="topic in form.topics | orderBy: '+ordr'">
  
  <div class="col-md-12">
  
  <div class="panel panel-default">
    <div class="panel-heading">
      {{ topic.name }}
    </div>
    
    <table class="table table-hover">
      <tr ng-repeat="benchmark in topic.benchmarks | orderBy: '+ordr'">
        <td>{{ benchmark.content }}</td>
        <td class="" style="width:70px;">
          <input type="text" ng-model="scores[benchmark.id]"
            ng-pattern="/^(\?|[1-4](?:.5)?|5)$/" class="form-control text-center">
        </td>
      </tr>
    </table>
  </div>
  
  </div>

</div>
</form>

<div class="row" ng-controller="ReviewFeedbackCtrl">
  <form novalidate class="form-horizontal" name="feedbackForm">
    <input type="hidden" ng-model="feedback.id">
    
    <label for="feedback_content" class="col-md-2 control-label">Feedback</label>
    
    <div class="col-md-9" ng-class="{ 'has-error': feedbackForm.feedback_content.$invalid 
          && submitted }">
        <textarea class="form-control" name="feedback_content" ng-model="feedback.content" 
          ng-required="true" ng-minlength="2" rows="6"></textarea>
        <p ng-show="feedbackForm.feedback_content.$invalid && submitted" 
            class="help-block">Content is required</p>
    </div>
    <div class="col-md-1">
      <button ng-click="saveFeedback(feedback, feedbackForm.$valid)" type="button"
        class="btn btn-default btn-sm">Save</button>
    </div>
  </form>
</div>

</div>