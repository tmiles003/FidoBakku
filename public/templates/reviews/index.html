<!-- h1>Listing reviews</h1 -->

<div class="row">

  <div class="col-md-8">
  
  <div class="panel panel-default">
    <div class="panel-heading">Reviews</div>
    <!-- div class="panel-body">
    </div -->
    <table class="table table-hover">
      <tr ng-repeat="review in reviews | orderBy: '-created'">
        <td>
          <a href="{{ review.manage_path }}">{{ review.title }}</a>
        </td>
        <td>
          {{ review.state }}
        </td>
        <td class="text-right">
          <button class="btn btn-default btn-fi-slim" ng-click="editReview(review)">
            <span class="glyphicon glyphicon-pencil"></span>
          </button>
          <button class="btn btn-default btn-fi-slim" ng-click="deleteReview(review)">
            <span class="glyphicon glyphicon-remove"></span>
          </button>
        </td>
      </tr>
    </table>
  </div>
  
  </div>

  <div class="col-md-4">

    <form accept-charset="utf-8" novalidate name="editableReviewForm">
      <input type="hidden" ng-model="editableReview.id">
      
      <div class="form-group" ng-class="{ 'has-error': editableReviewForm.review_title.$invalid && submitted }">
        <label for="review_title">Review</label>
        <input name="review_title" class="form-control" ng-model="editableReview.title" type="text" 
          ng-required="true" ng-minlength="2" ng-maxlength="100">
        <p ng-show="editableReviewForm.review_title.$invalid && submitted" 
          class="help-block">A title is required</p>
      </div>
      
      <div class="form-group" ng-class="{ 'has-error': editableReviewForm.review_state.$invalid 
          && !editableReviewForm.review_state.$pristine && submitted }">
        <label for="review_state">Status</label>
        <select name="review_state" ng-model="editableReview.state" class="form-control" 
          ng-options="state.s as state.l for state in states" ng-required="true">
        </select>
        <p ng-show="editableReviewForm.review_state.$invalid && !editableReviewForm.review_state.$pristine && submitted" 
          class="help-block">A status must be selected</p>
      </div>

      <div class="actions">
        <input ng-click="saveReview(editableReview, editableReviewForm.$valid)" type="submit" value="Save"
          class="btn btn-default btn-sm">
      </div>
      
    </form>

  </div>

</div>