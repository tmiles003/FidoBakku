<!-- h1>Form#edit</h1 -->

<div class="row">
  <div class="col-md-9">
    <!-- topics first -->
    <div class="panel panel-default" ng-repeat="topic in topics | orderBy: '+ordr'">
      <div class="panel-heading">{{ topic.name }}
        <span class="pull-right">
          <button class="btn btn-default fi-btn-slim" ng-click="moveTopicUp(topic)">
            <i class="fa fa-arrow-up fa-lg"></i>
          </button>
          <button class="btn btn-default fi-btn-slim" ng-click="moveTopicDown(topic)">
            <i class="fa fa-arrow-down fa-lg"></i>
          </button>
          <button class="btn btn-default fi-btn-slim" ng-click="editTopic(topic)">
            <i class="fa fa-edit fa-lg"></i>
          </button>
          <button class="btn btn-default fi-btn-slim" ng-click="deleteTopic(topic)">
            <i class="fa fa-trash-o fa-lg"></i>
          </button>
        </span>
      </div>
      <!-- topic benchmarks -->
      <div ng-include="'/templates/forms/manage_benchmarks.html'">
      </div>
    </div>
    
    <!-- then the new/edit topic form -->
    <div class="panel panel-default">
      <div class="panel-heading">Topic form</div>
      <form class="form-inline" accept-charset="utf-8" novalidate name="editableTopicForm">
        <input type="hidden" ng-model="editableTopic.id">
        
        <label for="topic_name" class="control-label">Topic</label>
        
        <div class="" ng-class="{ 'has-error': editableTopicForm.topic_name.$invalid && submitted }">
          <input name="topic_name" class="form-control" ng-model="editableTopic.name" type="text"
            ng-required="true" ng-minlength="4" ng-maxlength="100">
          <p ng-show="editableTopicForm.topic_name.$invalid && submitted" 
            class="help-block">A topic is required</p>
        </div>
        <div class="">
          <button ng-click="saveTopic(editableTopic, editableTopicForm.$valid)" type="button"
            class="btn btn-default">Save</button>
        </div>
      </form>
    </div>
  </div>
  
  <div class="col-md-3">
    <!-- tabbed user lists -->
    <div class="panel panel-default">
      <div class="panel-heading">Users</div>
      <!-- div class="panel-body">
      </div -->
      <div class="fi-panel-inner" ng-controller="FormUserCtrl">
        <!-- filter with a drop-down. role/team -->
        <select name="user_role" ng-model="role" class="form-control" 
          ng-options="role.s as role.l for role in roles">
        </select>
        <hr>
        <button ng-repeat="user in users | orderBy: '+name' | filter: role" 
          form-user user="user" ng-click="updateFormAssignment(user.id)"
          type="button" class="btn btn-default btn-block fi-btn-short">{{ user.name }}</button>
      </div>
    </div>
  </div>
</div>
